name: deleted-later
on: [push]

jobs:
  windows-why:
    runs-on: windows-latest
    continue-on-error: ${{ matrix.platform == 'ARM64' }}
    strategy:
      fail-fast: false
      matrix:
        platform: [Win32, x64, ARM64]
        release: [master, openal-soft-1.21.0, openal-soft-1.20.1]
    steps:
    - name: Print Environment Variables
      shell: cmd
      run: set
    - name: Checkout
      uses: actions/checkout@v2
      with:
        path: openal-soft
        repository: kcat/openal-soft
        ref: ${{ matrix.release }}
    - name: Configure
      shell: cmd
      env:
        WINARCH: ${{ matrix.platform }}
      run: cmake -Bbuild -Hopenal-soft -DCMAKE_INSTALL_PREFIX=%CD%\install -A %WINARCH%
    - name: Build & Install
      shell: cmd
      run: cmake --build build --config Release --target install
